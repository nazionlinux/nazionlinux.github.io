---
id: 767
title: 'Archlinux velocizzare la navigazione con DNSMasq'
date: '2013-12-21T11:11:51+02:00'
author: NazionLinux
layout: post
guid: 'http://www.nazionlinux.com/?p=767'
permalink: /archlinux-velocizzare-la-navigazione-con-dnsmasq/
'Hide SexyBookmarks':
    - '0'
'Hide OgTags':
    - '0'
hl_twitter_has_auto_tweeted:
    - 'Titolo: Archlinux velocizzare la navigazione con DNSMasq, Articolo: http://www.nazionlinux.com/?p=767'
image: /wp-content/uploads/2013/12/Servidor-DNS-con-dnsmasq_html_m6de5e09c.png
categories:
    - 'Arch Linux'
    - Distribuzioni
    - GNU/Linux
    - Sistema
    - Terminale
tags:
    - dhcp
    - dnsmasq
    - dwb
    - nano
    - netctl
    - NetworkManager
    - openresolv
    - wicd
---

### DNSMasq velocizzare la navigazione

**DNSMasq** offre un servizio di conservazione delle richieste **DNS (Domain Name Server)** migliorando la velocità di connessione verso i siti già visitati.  
Per installarlo aprite un terminale come amministratore di sistema e lanciate il comando

<div class="wp-terminal">`pacman -S dnsmasq`</div>terminata l’installazione del pacchetto **dnsmasq** editate il file **dnsmasq.conf**

<div class="wp-terminal">`nano /etc/dnsmasq.conf`</div>decommentate la riga **\#listen-address=** ed aggiungete **127.0.0.1**

> listen-address=127.0.0.1

allo stesso modo decommentate **\#resolv-file=** ed aggiungete **/etc/resolvdnsmasq.conf**

> resolv-file=/etc/resolvdnsmasq.conf

salvate il file appena modificato **ctrl + o** ed uscite **ctrl + z** da **Nano**.

Ora bisognerà creare il file **resolvdnsmasq.conf** per farlo basta lanciare il comando

<div class="wp-terminal">`nano /etc/resolvdnsmasq.conf`</div>all’interno di questo file vuoto dovete inserire i vostri server DNS oppure, per esempio, potete mettere gli indirizzi dei server **DNS** di **Cloudflare**

> nameserver 1.1.1.1  
> nameserver 1.0.0.1

salvate il file appena creato **ctrl + o** ed uscite **ctrl + z** da **Nano**.  
Per quanto riguarda **DNSMasq** abbiamo finito, ma se volete approfondire potete leggere qualcosa sul **[Wiki Archlinux](https://wiki.archlinux.org/index.php/Main_Page_%28Italiano%29 "Wiki ArchLinux")** alla pagina **[https://wiki.archlinux.org/index.php/Dnsmasq\_%28Italiano%29](https://wiki.archlinux.org/index.php/Dnsmasq_%28Italiano%29 "Wiki ArchLinux - DNSMasq")**.

Molti programmi di gestione delle connessioni come ad esempio **[NetworkMananer](http://www.nazionlinux.com/networkmanager-aggiornato-come-provarlo-su-kde-gnome-xfce-e-lxde/ "NetworkManager")**, **Wicd**, **Netctl**… vanno a sovrascrivere il file **resolv.conf** rendendo cosi inutile il lavoro effettuato prima.

Nella guida in inglese di **DNSMasq** si consiglia di inserire la stringa **nohook resolv.conf** alla fine del file **dhcpcd.conf** sinceramente non ho ottunuto nessun risultato il file **resolv.conf** continuava ad essere riscritto dal programma di gestione delle connessioni.  
Per evitare tutto questo in rete si possono trovare diverse soluzioni, alcune funzionanti ed altre no.  
La più semplice e secondo me la più pulita consiste nell’installare il pacchetto **openresolv**.  
Per farlo

<div class="wp-terminal">`pacman -S openresolv`</div>terminata l’installazione del pacchetto editate il file **resolvconf.conf**

<div class="wp-terminal">`nano /etc/resolvconf.conf`</div>decommentate la riga **\#name\_servers=127.0.0.1**

> name\_servers=127.0.0.1

salvate il file appena modificato **ctrl + o** ed uscite **ctrl + z** da **Nano**.  
Adesso fate bene **ATTENZIONE** aprire il file **resolv.conf** in questo modo

<div class="wp-terminal">`nano /etc/resolv.conf`</div>cancellate tutte le righe **nameserver** ed inserire solo **nameserver 127.0.0.1** come nell’esempio qui sotto riportato

<div class="wp-terminal">`# Generated by resolvconf<br></br>domain fastwebnet.it<br></br>nameserver 127.0.0.1`</div>salvate il file appena modificato **ctrl + o** ed uscite **ctrl + z** da **Nano**.

Per finire lanciare il demone **dnsmasq** all’avvio di sistema con il comando

<div class="wp-terminal">`systemctl enable dnsmasq`</div>e riavvitate la macchina.  
Se non volete riavviare il vostro computer e volete provare subito le modifiche dopo aver lanciato il comando **systemctl enable dnsmasq** lanciate il comando

<div class="wp-terminal">`systemctl start dnsmasq`</div>per controllare se tutto funziona aprite il vosto navigatore e controllate se la vostra navigazione risulta più veloce.

Un altro modo per aumentare la velocità di navigazione consiste nell’utilizzare un programma di navigazione leggero come ad esempio **[dwb](http://portix.bitbucket.org/dwb/ "Dwb")**.